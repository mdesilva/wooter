<h1 id="contributing-to-leaflet">Contributing to Leaflet</h1>
<ol>
<li><a href="#getting-involved">Getting Involved</a></li>
<li><a href="#reporting-bugs">Reporting Bugs</a></li>
<li><a href="#contributing-code">Contributing Code</a></li>
<li><a href="#improving-documentation">Improving Documentation</a></li>
</ol>
<h2 id="getting-involved">Getting Involved</h2>
<p>Third-party patches are absolutely essential on our quest to create the best mapping library that will ever exist.
However, they&#39;re not the only way to get involved with the development of Leaflet.
You can help the project tremendously by discovering and <a href="#reporting-bugs">reporting bugs</a>,
<a href="#improving-documentation">improving documentation</a>,
helping others on the <a href="https://groups.google.com/forum/#!forum/leaflet-js">Leaflet forum</a>
and <a href="https://github.com/Leaflet/Leaflet/issues">GitHub issues</a>,
showing your support for your favorite feature suggestions on <a href="http://leaflet.uservoice.com">Leaflet UserVoice page</a>,
tweeting to <a href="http://twitter.com/LeafletJS">@LeafletJS</a>
and spreading the word about Leaflet among your colleagues and friends.</p>
<h2 id="reporting-bugs">Reporting Bugs</h2>
<p>Before reporting a bug on the project&#39;s <a href="https://github.com/Leaflet/Leaflet/issues">issues page</a>,
first make sure that your issue is caused by Leaflet, not your application code
(e.g. passing incorrect arguments to methods, etc.).
Second, search the already reported issues for similar cases,
and if it&#39;s already reported, just add any additional details in the comments.</p>
<p>After you made sure that you&#39;ve found a new Leaflet bug,
here are some tips for creating a helpful report that will make fixing it much easier and quicker:</p>
<ul>
<li>Write a <strong>descriptive, specific title</strong>. Bad: <em>Problem with polylines</em>. Good: <em>Doing X in IE9 causes Z</em>.</li>
<li>Include <strong>browser, OS and Leaflet version</strong> info in the description.</li>
<li>Create a <strong>simple test case</strong> that demonstrates the bug (e.g. using <a href="http://jsfiddle.net/">JSFiddle</a>).</li>
<li>Check whether the bug can be reproduced in <strong>other browsers</strong>.</li>
<li>Check if the bug occurs in the stable version, master, or both.</li>
<li><em>Bonus tip:</em> if the bug only appears in the master version but the stable version is fine,
use <code>git bisect</code> to find the exact commit that introduced the bug.</li>
</ul>
<p>If you just want some help with your project,
try asking <a href="https://groups.google.com/forum/#!forum/leaflet-js">on the Leaflet forum</a> instead.</p>
<h2 id="contributing-code">Contributing Code</h2>
<h3 id="considerations-for-accepting-patches">Considerations for Accepting Patches</h3>
<p>While we happily accept patches, we&#39;re also commited to keeping Leaflet simple, lightweight and blazingly fast.
So bugfixes, performance optimizations and small improvements that don&#39;t add a lot of code
are much more likely to get accepted quickly.</p>
<p>Before sending a pull request with a new feature, first check if it&#39;s been discussed before already
(either on <a href="https://github.com/Leaflet/Leaflet/issues">GitHub issues</a>
or <a href="http://leaflet.uservoice.com/">Leaflet UserVoice</a>),
and then ask yourself two questions:</p>
<ol>
<li>Are you sure that this new feature is important enough to justify its presense in the Leaflet core?
Or will it look better as a plugin in a separate repository?</li>
<li>Is it written in a simple, concise way that doesn&#39;t add bulk to the codebase?</li>
</ol>
<p>If your feature or API improvement did get merged into master,
please consider submitting another pull request with the corresponding <a href="#improving-documentation">documentation update</a>.</p>
<h3 id="setting-up-the-build-system">Setting up the Build System</h3>
<p>To set up the Leaflet build system, install <a href="http://nodejs.org/">Node</a>,
then run the following commands in the project root:</p>
<pre><code>npm install -g jake
npm install
</code></pre><p>You can build minified Leaflet by running <code>jake</code> (it will be built from source in the <code>dist</code> folder).
For a custom build with selected components, open <code>build/build.html</code> in the browser and follow the instructions from there.</p>
<h3 id="making-changes-to-leaflet-source">Making Changes to Leaflet Source</h3>
<p>If you&#39;re not yet familiar with the way GitHub works (forking, pull requests, etc.),
be sure to check out the awesome <a href="https://help.github.com/articles/fork-a-repo">article about forking</a>
on the GitHub Help website &mdash; it will get you started quickly.</p>
<p>You should always write each batch of changes (feature, bugfix, etc.) in <strong>its own topic branch</strong>.
Please do not commit to the <code>master</code> branch, or your unrelated changes will go into the same pull request.</p>
<p>You should also follow the code style and whitespace conventions of the original codebase.
In particular, use tabs for indentation and spaces for alignment.</p>
<p>Before commiting your changes, run <code>jake lint</code> to catch any JS errors in the code and fix them.
If you add any new files to the Leaflet source, make sure to also add them to <code>build/deps.js</code>
so that the build system knows about them.</p>
<p>Also, please make sure that you have <a href="https://help.github.com/articles/dealing-with-line-endings">line endings configured properly</a> in Git! Otherwise the diff will show that all lines of a file were changed even if you touched only one.</p>
<p>Happy coding!</p>
<h2 id="running-the-tests">Running the Tests</h2>
<p>To run the tests from the command line,
install <a href="http://phantomjs.org/">PhantomJS</a> (and make sure it&#39;s in your <code>PATH</code>),
then run:</p>
<pre><code>jake test
</code></pre><p>To run all the tests in actual browsers at the same time, you can do:</p>
<pre><code>jake test --ff --chrome --safari --ie
</code></pre><p>To run the tests in a browser manually, open <code>spec/index.html</code>.</p>
<h2 id="code-coverage">Code Coverage</h2>
<p>To generate a detailed report about test coverage (which helps tremendously when working on test improvements), run:</p>
<pre><code>jake test --cov
</code></pre><p>After that, open <code>spec/coverage/&lt;environment&gt;/index.html</code> in a browser to see the report.
From there you can click through folders/files to get details on their individual coverage.</p>
<h2 id="improving-documentation">Improving Documentation</h2>
<p>The code of the live Leaflet website that contains all documentation and examples is located in the <code>gh-pages</code> branch
and is automatically generated from a set of HTML and Markdown files by <a href="https://github.com/mojombo/jekyll">Jekyll</a>.</p>
<p>The easiest way to make little improvements such as fixing typos without even leaving the browser
is by editing one of the files with the online GitHub editor:
browse the <a href="https://github.com/Leaflet/Leaflet/tree/gh-pages">gh-pages branch</a>,
choose a certain file for editing (e.g. <code>reference.html</code> for API reference),
click the Edit button, make changes and follow instructions from there.
Once it gets merged, the changes will immediately appear on the website.</p>
<p>If you need to make edits in a local repository to see how it looks in the process, do the following:</p>
<ol>
<li><a href="http://www.ruby-lang.org/en/">Install Ruby</a> if don&#39;t have it yet.</li>
<li>Run <code>gem install jekyll</code>.</li>
<li>Run <code>jekyll serve --watch</code> in the root <code>Leaflet</code> folder.</li>
<li>Open <code>localhost:4000</code> in your browser.</li>
</ol>
<p>Now any file changes will be updated when you reload pages automatically.
After commiting the changes, just send a pull request.</p>
<p>If you need to update documentation according to a new feature that only appeared in the master version (not stable one),
you need to make changes to <code>gh-pages-master</code> branch instead of <code>gh-pages</code>.
It will get merged into the latter when released as stable.</p>
<h2 id="thank-you">Thank You</h2>
<p>Not only are we grateful for any contributions, &mdash; helping Leaflet and its community actually makes you AWESOME.
Join <a href="https://github.com/Leaflet/Leaflet/graphs/contributors">this approved list of awesome people</a>
and help us push the limits of what&#39;s possible with online maps!</p>
