!function(t,e,n){"use strict";function r(t){if(null==t)return"";switch(typeof t){case"string":return t;case"number":return""+t;default:return S(t)}}function i(t,e){for(var n=t.split(/\n/g),r=0;r<n.length;r++){var i=n[r];if(!(e>=i.length))return{line:r+1,column:e+1};e-=i.length}}function s(t){function e(e){return t}var n=P[t];return null!=n?n:(e.$$watchDelegate=function(e,n,r){var i=e.$watch($,function(){b(n)&&n.call(null,t,t,e),i()},r);return i},P[t]=e,e.exp=t,e.expressions=[],e)}function o(t,e){function n(t){return void 0==t?t:t-e}function r(e){return n(t(e))}if(0===e)return t;var i;return r.$$watchDelegate=function(e,r,s){return i=e.$watch(t,function(t,i){b(r)&&r.call(null,n(t),n(i),e)},s)},r}function a(t,e){var n=this;if(this.expressionFn=t,this.choices=e,void 0===e.other)throw w("reqother","“other” is a required option.");this.parsedFn=function(t){return n.getResult(t)},this.parsedFn.$$watchDelegate=function(t,e,r){return n.watchDelegate(t,e,r)},this.parsedFn.exp=t.exp,this.parsedFn.expressions=t.expressions}function u(t,e,n,r){var i=this;this.scope=e,this.msgSelector=t,this.listener=n,this.objectEquality=r,this.lastMessage=void 0,this.messageFnWatcher=$;var s=function(t,e){return i.expressionFnListener(t,e)};this.expressionFnWatcher=e.$watch(t.expressionFn,s,r)}function l(t,e){a.call(this,t,e)}function c(){}function h(t,e,n,r){a.call(this,t,e),this.offset=n,this.pluralCat=r}function p(){}function d(t,e){this.trustedContext=t,this.allOrNothing=e,this.textParts=[],this.expressionFns=[],this.expressionIndices=[],this.partialText="",this.concatParts=null}function f(t,e,n,r){this.interpolationParts=t,this.scope=e,this.previousResult=void 0,this.listener=n;var i=this;this.expressionFnsWatcher=e.$watchGroup(t.expressionFns,function(t,e){i.watchListener(t,e)})}function g(t,e){e.expressionFn=t.expressionFn,e.expressionMinusOffsetFn=t.expressionMinusOffsetFn,e.pluralOffset=t.pluralOffset,e.choices=t.choices,e.choiceKey=t.choiceKey,e.interpolationParts=t.interpolationParts,e.ruleChoiceKeyword=t.ruleChoiceKeyword,e.msgStartIndex=t.msgStartIndex,e.expressionStartIndex=t.expressionStartIndex}function x(t){g(t,this)}function v(t,e,n,r,i,s,o,a){this.text=t,this.index=e||0,this.$parse=n,this.pluralCat=r,this.stringifier=i,this.mustHaveExpression=!!s,this.trustedContext=o,this.allOrNothing=!!a,this.expressionFn=null,this.expressionMinusOffsetFn=null,this.pluralOffset=null,this.choices=null,this.choiceKey=null,this.interpolationParts=null,this.msgStartIndex=null,this.nestedStateStack=[],this.parsedFn=null,this.rule=null,this.ruleStack=null,this.ruleChoiceKeyword=null,this.interpNestLevel=null,this.expressionStartIndex=null,this.stringStartIndex=null,this.stringQuote=null,this.stringInterestsRe=null,this.angularOperatorStack=null,this.textPart=null}function m(t){switch(t){case"{":return"}";case"[":return"]";case"(":return")";default:return null}}function y(t){switch(t){case"}":return"{";case"]":return"[";case")":return"(";default:return null}}var w=t.angular.$interpolateMinErr,$=t.angular.noop,b=t.angular.isFunction,S=t.angular.toJson,P=Object.create(null);a.prototype.getMessageFn=function(t){return this.choices[this.categorizeValue(t)]},a.prototype.getResult=function(t){return this.getMessageFn(this.expressionFn(t))(t)},a.prototype.watchDelegate=function(t,e,n){var r=new u(this,t,e,n);return function(){r.cancelWatch()}},u.prototype.expressionFnListener=function(t,e){var n=this;this.messageFnWatcher();var r=function(t,e){return n.messageFnListener(t,e)},i=this.msgSelector.getMessageFn(t);this.messageFnWatcher=this.scope.$watch(i,r,this.objectEquality)},u.prototype.messageFnListener=function(t,e){b(this.listener)&&this.listener.call(null,t,t===e?t:this.lastMessage,this.scope),this.lastMessage=t},u.prototype.cancelWatch=function(){this.expressionFnWatcher(),this.messageFnWatcher()},c.prototype=a.prototype,l.prototype=new c,l.prototype.categorizeValue=function(t){return void 0!==this.choices[t]?t:"other"},p.prototype=a.prototype,h.prototype=new p,h.prototype.categorizeValue=function(t){if(isNaN(t))return"other";if(void 0!==this.choices[t])return t;var e=this.pluralCat(t-this.offset);return void 0!==this.choices[e]?e:"other"},d.prototype.flushPartialText=function(){this.partialText&&(null==this.concatParts?this.textParts.push(this.partialText):(this.textParts.push(this.concatParts.join("")),this.concatParts=null),this.partialText="")},d.prototype.addText=function(t){t.length&&(this.partialText?this.concatParts?this.concatParts.push(t):this.concatParts=[this.partialText,t]:this.partialText=t)},d.prototype.addExpressionFn=function(t){this.flushPartialText(),this.expressionIndices.push(this.textParts.length),this.expressionFns.push(t),this.textParts.push("")},d.prototype.getExpressionValues=function(t){for(var e=new Array(this.expressionFns.length),n=0;n<this.expressionFns.length;n++)e[n]=this.expressionFns[n](t);return e},d.prototype.getResult=function(t){for(var e=0;e<this.expressionIndices.length;e++){var n=t[e];if(this.allOrNothing&&void 0===n)return;this.textParts[this.expressionIndices[e]]=n}return this.textParts.join("")},d.prototype.toParsedFn=function(t,e){var n=this;if(this.flushPartialText(),t&&0===this.expressionFns.length)return void 0;if(0===this.textParts.length)return s("");if(this.trustedContext&&this.textParts.length>1&&w.throwNoconcat(e),0===this.expressionFns.length)return 1!=this.textParts.length&&this.errorInParseLogic(),s(this.textParts[0]);var r=function(t){return n.getResult(n.getExpressionValues(t))};r.$$watchDelegate=function(t,e,r){return n.watchDelegate(t,e,r)},r.exp=e,r.expressions=new Array(this.expressionFns.length);for(var i=0;i<this.expressionFns.length;i++)r.expressions[i]=this.expressionFns[i].exp;return r},d.prototype.watchDelegate=function(t,e,n){var r=new f(this,t,e,n);return function(){r.cancelWatch()}},f.prototype.watchListener=function(t,e){var n=this.interpolationParts.getResult(t);b(this.listener)&&this.listener.call(null,n,t===e?n:this.previousResult,this.scope),this.previousResult=n},f.prototype.cancelWatch=function(){this.expressionFnsWatcher()};var F=new x(new v("",0,null,null,null,!1,null,!1));v.prototype.pushState=function(){this.nestedStateStack.push(new x(this)),g(F,this)},v.prototype.popState=function(){0===this.nestedStateStack.length&&this.errorInParseLogic();var t=this.nestedStateStack.pop();g(t,this)},v.prototype.matchRe=function(t,e){t.lastIndex=this.index;var n=t.exec(this.text);return null==n||e!==!0&&n.index!=this.index?null:(this.index=t.lastIndex,n)},v.prototype.searchRe=function(t){return this.matchRe(t,!0)},v.prototype.consumeRe=function(t){return!!this.matchRe(t)},v.prototype.run=function(t){this.ruleStack=[t];do{for(this.rule=this.ruleStack.pop();this.rule;)this.rule();this.assertRuleOrNull(this.rule)}while(this.ruleStack.length>0)},v.prototype.errorInParseLogic=function(){throw w("logicbug","The messageformat parser has encountered an internal error.  Please file a github issue against the AngularJS project and provide this message text that triggers the bug.  Text: “{0}”",this.text)},v.prototype.assertRuleOrNull=function(t){void 0===t&&this.errorInParseLogic()};var k=/\s*(\w+)\s*/g;v.prototype.errorExpecting=function(){var t,e=this.matchRe(k);if(null==e)throw t=i(this.text,this.index),w("reqarg","Expected one of “plural” or “select” at line {0}, column {1} of text “{2}”",t.line,t.column,this.text);var n=e[1];throw"select"==n||"plural"==n?(t=i(this.text,this.index),w("reqcomma","Expected a comma after the keyword “{0}” at line {1}, column {2} of text “{3}”",n,t.line,t.column,this.text)):(t=i(this.text,this.index),w("unknarg","Unsupported keyword “{0}” at line {0}, column {1}. Only “plural” and “select” are currently supported.  Text: “{3}”",n,t.line,t.column,this.text))};var E=/['"]/g;v.prototype.ruleString=function(){var t=this.matchRe(E);if(null==t){var e=i(this.text,this.index);throw w("wantstring","Expected the beginning of a string at line {0}, column {1} in text “{2}”",e.line,e.column,this.text)}this.startStringAtMatch(t)},v.prototype.startStringAtMatch=function(t){this.stringStartIndex=t.index,this.stringQuote=t[0],this.stringInterestsRe="'"==this.stringQuote?I:O,this.rule=this.ruleInsideString};var I=/\\(?:\\|'|u[0-9A-Fa-f]{4}|x[0-9A-Fa-f]{2}|[0-7]{3}|\r\n|\n|[\s\S])|'/g,O=/\\(?:\\|"|u[0-9A-Fa-f]{4}|x[0-9A-Fa-f]{2}|[0-7]{3}|\r\n|\n|[\s\S])|"/g;v.prototype.ruleInsideString=function(){var t=this.searchRe(this.stringInterestsRe);if(null==t){var e=i(this.text,this.stringStartIndex);throw w("untermstr","The string beginning at line {0}, column {1} is unterminated in text “{2}”",e.line,e.column,this.text)}t[0];t==this.stringQuote&&(this.rule=null)};var T=/\s*(plural|select)\s*,\s*/g;v.prototype.rulePluralOrSelect=function(){var t=this.searchRe(T);null==t&&this.errorExpecting();var e=t[1];switch(e){case"plural":this.rule=this.rulePluralStyle;break;case"select":this.rule=this.ruleSelectStyle;break;default:this.errorInParseLogic()}},v.prototype.rulePluralStyle=function(){this.choices=Object.create(null),this.ruleChoiceKeyword=this.rulePluralValueOrKeyword,this.rule=this.rulePluralOffset},v.prototype.ruleSelectStyle=function(){this.choices=Object.create(null),this.ruleChoiceKeyword=this.ruleSelectKeyword,this.rule=this.ruleSelectKeyword};var C=/[0]|(?:[1-9][0-9]*)/g,M=new RegExp("\\s*offset\\s*:\\s*("+C.source+")","g");v.prototype.rulePluralOffset=function(){var t=this.matchRe(M);this.pluralOffset=null==t?0:parseInt(t[1],10),this.expressionMinusOffsetFn=o(this.expressionFn,this.pluralOffset),this.rule=this.rulePluralValueOrKeyword},v.prototype.assertChoiceKeyIsNew=function(t,e){if(void 0!==this.choices[t]){var n=i(this.text,e);throw w("dupvalue","The choice “{0}” is specified more than once. Duplicate key is at line {1}, column {2} in text “{3}”",t,n.line,n.column,this.text)}};var A=/\s*(\w+)/g;v.prototype.ruleSelectKeyword=function(){var t=this.matchRe(A);return null==t?(this.parsedFn=new l(this.expressionFn,this.choices).parsedFn,void(this.rule=null)):(this.choiceKey=t[1],this.assertChoiceKeyIsNew(this.choiceKey,t.index),void(this.rule=this.ruleMessageText))};var R=new RegExp("\\s*(?:(?:=("+C.source+"))|(\\w+))","g");v.prototype.rulePluralValueOrKeyword=function(){var t=this.matchRe(R);return null==t?(this.parsedFn=new h(this.expressionFn,this.choices,this.pluralOffset,this.pluralCat).parsedFn,void(this.rule=null)):(null!=t[1]?this.choiceKey=parseInt(t[1],10):this.choiceKey=t[2],this.assertChoiceKeyIsNew(this.choiceKey,t.index),void(this.rule=this.ruleMessageText))};var D=/\s*{/g;v.prototype.ruleMessageText=function(){if(!this.consumeRe(D)){var t=i(this.text,this.index);throw w("reqopenbrace","The plural choice “{0}” must be followed by a message in braces at line {1}, column {2} in text “{3}”",this.choiceKey,t.line,t.column,this.text)}this.msgStartIndex=this.index,this.interpolationParts=new d(this.trustedContext,this.allOrNothing),this.rule=this.ruleInInterpolationOrMessageText};var K=/\\.|{{|}/g,j=/\\.|{{|#|}/g,L=/\\.|{{/g;v.prototype.advanceInInterpolationOrMessageText=function(){var t,e=this.index;if(null==this.ruleChoiceKeyword){if(t=this.searchRe(L),null==t)return this.textPart=this.text.substring(e),this.index=this.text.length,null}else if(t=this.searchRe(this.ruleChoiceKeyword==this.rulePluralValueOrKeyword?j:K),null==t){var n=i(this.text,this.msgStartIndex);throw w("reqendbrace","The plural/select choice “{0}” message starting at line {1}, column {2} does not have an ending closing brace. Text “{3}”",this.choiceKey,n.line,n.column,this.text)}var r=t[0];return this.textPart=this.text.substring(e,t.index),r},v.prototype.ruleInInterpolationOrMessageText=function(){var t=this.index,e=this.advanceInInterpolationOrMessageText();return null==e?(this.index=this.text.length,this.interpolationParts.addText(this.text.substring(t)),void(this.rule=null)):"\\"==e[0]?void this.interpolationParts.addText(this.textPart+e[1]):(this.interpolationParts.addText(this.textPart),void("{{"==e?(this.pushState(),this.ruleStack.push(this.ruleEndMustacheInInterpolationOrMessage),this.rule=this.ruleEnteredMustache):"}"==e?(this.choices[this.choiceKey]=this.interpolationParts.toParsedFn(!1,this.text),this.rule=this.ruleChoiceKeyword):"#"==e?this.interpolationParts.addExpressionFn(this.expressionMinusOffsetFn):this.errorInParseLogic()))},v.prototype.ruleInterpolate=function(){this.interpolationParts=new d(this.trustedContext,this.allOrNothing),this.rule=this.ruleInInterpolation},v.prototype.ruleInInterpolation=function(){var t=this.index,e=this.searchRe(L);if(null==e)return this.index=this.text.length,this.interpolationParts.addText(this.text.substring(t)),this.parsedFn=this.interpolationParts.toParsedFn(this.mustHaveExpression,this.text),void(this.rule=null);var n=e[0];return"\\"==n[0]?void this.interpolationParts.addText(this.text.substring(t,e.index)+n[1]):(this.interpolationParts.addText(this.text.substring(t,e.index)),this.pushState(),this.ruleStack.push(this.ruleInterpolationEndMustache),void(this.rule=this.ruleEnteredMustache))},v.prototype.ruleInterpolationEndMustache=function(){var t=this.parsedFn;this.popState(),this.interpolationParts.addExpressionFn(t),this.rule=this.ruleInInterpolation},v.prototype.ruleEnteredMustache=function(){this.parsedFn=null,this.ruleStack.push(this.ruleEndMustache),this.rule=this.ruleAngularExpression},v.prototype.ruleEndMustacheInInterpolationOrMessage=function(){var t=this.parsedFn;this.popState(),this.interpolationParts.addExpressionFn(t),this.rule=this.ruleInInterpolationOrMessageText};var q=/\s*}}/g;v.prototype.ruleEndMustache=function(){var t=this.matchRe(q);if(null==t){var e=i(this.text,this.index);throw w("reqendinterp","Expecting end of interpolation symbol, “{0}”, at line {1}, column {2} in text “{3}”","}}",e.line,e.column,this.text)}null==this.parsedFn&&(this.parsedFn=this.$parse(this.expressionFn,this.stringifier),this.parsedFn.exp=this.expressionFn.exp,this.parsedFn.expressions=this.expressionFn.expressions),this.rule=null},v.prototype.ruleAngularExpression=function(){this.angularOperatorStack=[],this.expressionStartIndex=this.index,this.rule=this.ruleInAngularExpression};var z=/[[\]{}()'",]/g;v.prototype.ruleInAngularExpression=function(){var t,e=(this.index,this.searchRe(z));if(null==e){if(0===this.angularOperatorStack.length)return this.index=this.text.length,this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,this.index)),this.expressionFn.exp=this.text.substring(this.expressionStartIndex,this.index),this.expressionFn.expressions=this.expressionFn.expressions,void(this.rule=null);var n=this.angularOperatorStack[0];throw w("badexpr","Unexpected end of Angular expression.  Expecting operator “{0}” at the end of the text “{1}”",this.getEndOperator(n),this.text)}var r=e[0];if("'"==r||'"'==r)return this.ruleStack.push(this.ruleInAngularExpression),void this.startStringAtMatch(e);if(","==r){if(this.trustedContext)throw t=i(this.text,this.index),w("unsafe","Use of select/plural MessageFormat syntax is currently disallowed in a secure context ({0}).  At line {1}, column {2} of text “{3}”",this.trustedContext,t.line,t.column,this.text);return void(0===this.angularOperatorStack.length&&(this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,e.index)),this.expressionFn.exp=this.text.substring(this.expressionStartIndex,e.index),this.expressionFn.expressions=this.expressionFn.expressions,this.rule=null,this.rule=this.rulePluralOrSelect))}if(null!=m(r))return void this.angularOperatorStack.unshift(r);var s=y(r);if(null==s&&this.errorInParseLogic(),this.angularOperatorStack.length>0){if(s==this.angularOperatorStack[0])return void this.angularOperatorStack.shift();throw t=i(this.text,this.index),w("badexpr","Unexpected operator “{0}” at line {1}, column {2} in text. Was expecting “{3}”. Text: “{4}”",r,t.line,t.column,m(this.angularOperatorStack[0]),this.text)}this.index=e.index,this.expressionFn=this.$parse(this.text.substring(this.expressionStartIndex,this.index)),this.expressionFn.exp=this.text.substring(this.expressionStartIndex,this.index),this.expressionFn.expressions=this.expressionFn.expressions,this.rule=null};var W=["$parse","$locale","$sce","$exceptionHandler",function(t,e,n,i){function s(t,e,s){return function(o){try{return o=t?n.getTrusted(t,o):n.valueOf(o),e&&void 0===o?o:r(o)}catch(a){i(w.interr(s,a))}}}function o(n,r,i,o){var a=s(i,o,n),u=new v(n,0,t,e.pluralCat,a,r,i,o);return u.run(u.ruleInterpolate),u.parsedFn}return{interpolate:o}}],N=["$$messageFormat","$delegate",function(t,e){if("{{"!=e.startSymbol()||"}}"!=e.endSymbol())throw w("nochgmustache","angular-message-format.js currently does not allow you to use custom start and end symbols for interpolation.");var n=t.interpolate;return n.startSymbol=e.startSymbol,n.endSymbol=e.endSymbol,n}],U=t.angular.module("ngMessageFormat",["ng"]);U.factory("$$messageFormat",W),U.config(["$provide",function(t){t.decorator("$interpolate",N)}])}(window,window.angular);
